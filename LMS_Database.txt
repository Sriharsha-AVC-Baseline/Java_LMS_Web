CREATE TABLE EMPLOYEE(
EMP_NAME VARCHAR(30),
EMP_ID VARCHAR(30) PRIMARY KEY,
EMP_ADDRESS VARCHAR(50),
EMP_PHONE VARCHAR(12),
EMP_MAIL VARCHAR(30),
EMP_DOB DATE,
EMP_GENDER VARCHAR(10),
EMP_DESG VARCHAR(15)
);   


CREATE TABLE MANAGER(
MANAGER_ID VARCHAR(30) PRIMARY KEY,
LEADS_UNDER_ME INT,
FOREIGN KEY (MANAGER_ID) REFERENCES EMPLOYEE(EMP_ID));   


CREATE TABLE LEADs(
LEAD_ID VARCHAR(30) primary key REFERENCES EMPLOYEE(EMP_ID),
MANAGER_ID VARCHAR(30) REFERENCES MANAGER(MANAGER_ID),
EXECS_UNDER_ME INT);   


CREATE TABLE EXECU(
EXEC_ID VARCHAR(30) PRIMARY KEY REFERENCES EMPLOYEE(EMP_ID),
MANAGER_ID VARCHAR(30) REFERENCES MANAGER(MANAGER_ID),
LEAD_ID VARCHAR(30) REFERENCES LEADs(LEAD_ID));  





CREATE TABLE LEAVES(
EMP_ID VARCHAR(30) UNIQUE REFERENCES EMPLOYEE(EMP_ID),
CASUAL_LEAVE INT DEFAULT 10,
EARNED_LEAVE INT DEFAULT 15,
DUTY_LEAVE INT DEFAULT 0,
SICK_LEAVE INT DEFAULT 12,
MATERNITY_LEAVE INT DEFAULT 120,
PARENTAL_LEAVE INT DEFAULT 7,
LEAVE_WITHOUT_PAY INT DEFAULT 180);


CREATE TABLE LEAVE_RECORDS(
EMP_ID VARCHAR(30) REFERENCES EMPLOYEE(EMP_ID),
LEAVE_TYPE VARCHAR(20),
FROM_DATE DATE,
TO_DATE DATE,
STATUS VARCHAR(20),
COMMENT VARCHAR(300),
NUMBER_OF_DAYS INT);


CREATE TABLE LEAD_APPLICATION(
EMP_ID VARCHAR(30) REFERENCES EXECU(EXEC_ID),
LEAD_ID VARCHAR(30) REFERENCES LEADs(LEAD_ID),
LEAVE_TYPE VARCHAR(20),
FROM_DATE DATE,
TO_DATE DATE,
STATUS VARCHAR(20),
COMMENT VARCHAR(300));

CREATE TABLE MANAGER_APPLICATION(
EMP_ID VARCHAR(30) REFERENCES EMPLOYEE(EMP_ID),
MANAGER_ID VARCHAR(30) REFERENCES MANAGER(MANAGER_ID),
LEAVE_TYPE VARCHAR(20),
FROM_DATE DATE,
TO_DATE DATE,
STATUS VARCHAR(20),
COMMENT VARCHAR(300));


SELECT *FROM LEAVE_RECORDS WHERE STATUS='CANCELLED' AND EMP_ID="EMP1"

// CREATE LEAVES TABLE TO STORE THE LEAVE RECORD OF EACH EMPLOYEE

Queries 
// Display the executives
SELECT DISTINCT E.EMP_NAME,E.EMP_MAIL,E.EMP_PHONE,M.EMP_NAME,L.EMP_NAME FROM EMPLOYEE E,EMPLOYEE L,EMPLOYEE M,EXECU EX,MANAGER MAN,LEADS LD WHERE EX.EXEC_ID=E.EMP_ID AND EX.MANAGER_ID=M.EMP_ID AND EX.LEAD_ID=L.EMP_ID;


// Display the leads
SELECT DISTINCT E.EMP_NAME,E.EMP_MAIL,E.EMP_PHONE,M.EMP_NAME FROM EMPLOYEE E,EMPLOYEE L,EMPLOYEE M,MANAGER MAN,LEADS LD WHERE LD.LEAD_ID=E.EMP_ID AND LD.MANAGER_ID=M.EMP_ID;


// Display the managers
SELECT DISTINCT E.EMP_NAME,E.EMP_MAIL,E.EMP_PHONE FROM EMPLOYEE E,MANAGER M WHERE E.EMP_ID=M.MANAGER_ID 


// Display Leave Records
SELECT *FROM LEAVE RECORDS WHERE EMP_ID=?



select *from leave_records where emp_id=(select lds.lead_id from leads lds,manager m where m.manager_id=lds.manager_id and m.manager_id='Manager2MSep2023');


select *from leave_records where emp_id=(select ex.exec_id from execu ex,manager m where m.manager_id=ex.manager_id and m.manager_id='Manager2MSep2023');